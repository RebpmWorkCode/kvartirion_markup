[
    {
        "Region": {
            "title": "Twig | Создание объекта",
            "alias": "twig_realty_form",
            "block_count": 1
        },
        "Block": [
            {
                "title": "Twig | Создание объекта",
                "alias": "twig_realty_form",
                "body": "{{ form.create('Advertisement', {\r\n    'enctype': 'multipart\/form-data',\r\n    'class': 'row popup-public__row',\r\n    'url': {'plugin': 'agency', 'controller': 'realty', 'action': 'add'},\r\n    'inputDefaults': {\r\n        'label': {\r\n            'class': 'ui-label'\r\n        },\r\n        'between': '<div>',\r\n        'after': '<\/div>'\r\n    }\r\n}) }}\r\n    {{ form.hidden('from_site', {'value': true}) }}\r\n    {{ form.hidden('contractor_id') }}\r\n    {{ form.hidden('Contractor.0.id') }}\r\n    <div class=\"col col-12 col-lg-4 popup-public__col\">\r\n        <div class=\"heading-base heading-base--medium\">Подать объявление на продажу<\/div>\r\n        {{ form.input('category_id') }}\r\n\r\n        {% set locationFormEdit = _view.loadHelper('Locations.LocationFormEdit') %}\r\n\r\n        {{ form.input('Location.location_region_id', {\r\n            'data-field': 'Location.location_region_id',\r\n            'data-placeholder': location.getPlaceholder('LocationRegion'),\r\n            'data-source': '\/locations\/data\/index\/LocationRegion',\r\n            'empty': true,\r\n            'options': locationFormEdit.getValues('LocationRegion'),\r\n            'class': 'JS-location-region location-select2',\r\n            'required': location.hasRequiredField('LocationRegion'),\r\n            'default': location.getDefault('LocationRegion'),\r\n            'label': {'class': 'ui-label', 'text': location.getLabel('LocationRegion', location.hasRequiredField('LocationRegion'))},\r\n        }) }}\r\n\r\n        {{ form.input('Location.district_id', {\r\n            'data-field': 'Location.district_id',\r\n            'data-placeholder': location.getPlaceholder('District'),\r\n            'data-source': '\/locations\/data\/index\/District\/location_region:',\r\n            'data-depends': '.JS-location-region',\r\n            'empty': true,\r\n            'options': locationFormEdit.getValues('District'),\r\n            'class': 'JS-district location-select2',\r\n            'required': location.hasRequiredField('District'),\r\n            'default': location.getDefault('District'),\r\n            'label': {'class': 'ui-label', 'text': location.getLabel('District', location.hasRequiredField('District'))},\r\n        }) }}\r\n\r\n        {{ form.input('Location.locality_id', {\r\n            'data-field': 'Location.locality_id',\r\n            'data-placeholder': location.getPlaceholder('Locality'),\r\n            'data-source': '\/locations\/data\/index\/Locality\/district:',\r\n            'data-depends': '.JS-district',\r\n            'empty': true,\r\n            'options': locationFormEdit.getValues('Locality'),\r\n            'class': 'JS-locality location-select2',\r\n            'required': location.hasRequiredField('Locality'),\r\n            'default': location.getDefault('Locality'),\r\n            'label': {'class': 'ui-label', 'text': location.getLabel('Locality', location.hasRequiredField('Locality'))},\r\n        }) }}\r\n\r\n        {{ form.input('Location.sub_locality_id', {\r\n            'data-field': 'Location.sub_locality_id',\r\n            'data-placeholder': location.getPlaceholder('SubLocality'),\r\n            'data-source': '\/locations\/data\/index\/SubLocality\/locality:',\r\n            'data-depends': '.JS-locality',\r\n            'empty': true,\r\n            'options': locationFormEdit.getValues('SubLocality'),\r\n            'class': 'JS-sub-locality location-select2',\r\n            'required': location.hasRequiredField('SubLocality'),\r\n            'default': location.getDefault('SubLocality'),\r\n            'label': {'class': 'ui-label', 'text': location.getLabel('SubLocality', location.hasRequiredField('SubLocality'))},\r\n        }) }}\r\n\r\n        {{ form.input('Location.street_id', {\r\n            'data-field': 'Location.street_id',\r\n            'data-placeholder': location.getPlaceholder('Street'),\r\n            'data-source': '\/locations\/data\/index\/Street\/locality:',\r\n            'data-depends': '.JS-locality',\r\n            'empty': true,\r\n            'options': locationFormEdit.getValues('Street'),\r\n            'class': 'JS-street location-select2',\r\n            'required': location.hasRequiredField('Street'),\r\n            'default': location.getDefault('Street'),\r\n            'label': {'class': 'ui-label', 'text': location.getLabel('Street', location.hasRequiredField('Street'))},\r\n        }) }}\r\n\r\n        <div class=\"row\">\r\n            {{ form.input('Location.house_number', {\r\n                'data-field': 'Location.house_number',\r\n                'class': 'JS-house-number ui-input',\r\n                'div': 'col-12 col-xl-6 house-number',\r\n                'between': '',\r\n                'after': '',\r\n                'required': location.hasRequiredField('HouseNumber'),\r\n                'label': {'class': 'ui-label', 'text': location.getLabel('HouseNumber', location.hasRequiredField('HouseNumber'))},\r\n            }) }}\r\n            {{ form.input('Advertisement.apartment', {\r\n                'data-field': 'Advertisement.apartment',\r\n                'class': 'JS-apartment ui-input',\r\n                'div': 'col-12 col-xl-6 JS-apartment-container',\r\n                'between': '',\r\n                'after': '',\r\n                'data-categories': location.getCategoriesShowField('apartment', 'json', 7),\r\n                'required': location.hasRequiredField('ApartmentNumber'),\r\n                'label': {'class': 'ui-label', 'text': location.getLabel('ApartmentNumber', location.hasRequiredField('ApartmentNumber'))},\r\n            }) }}\r\n        <\/div>\r\n\r\n        {{ form.input('Contractor.0.fio', {\r\n            'between': '',\r\n            'type': 'text',\r\n            'after': '',\r\n            'required': true,\r\n            'class': 'ui-input',\r\n            'label': {'class': 'ui-label', 'text': 'Фамилия, Имя, Отчество *'}\r\n        }) }}\r\n\r\n        {{ form.input('Contractor.0.phone', {\r\n            'between': '',\r\n            'type': 'tel',\r\n            'after': '',\r\n            'required': true,\r\n            'class': 'ui-input phone-mask phone-validate',\r\n            'label': {'class': 'ui-label', 'text': 'Телефон *'}\r\n        }) }}\r\n\r\n        {{ form.input('Contractor.0.email', {\r\n            'between': '',\r\n            'type': 'email',\r\n            'after': '',\r\n            'class': 'ui-input',\r\n            'label': {'class': 'ui-label', 'text': 'Электронная почта'}\r\n        }) }}\r\n\r\n        {{ form.input('title', {\r\n            'between': '',\r\n            'type': 'text',\r\n            'after': '',\r\n            'class': 'ui-input',\r\n            'label': {'class': 'ui-label', 'text': 'Заголовок'}\r\n        }) }}\r\n\r\n        {{ form.input('text', {\r\n            'between': '',\r\n            'type': 'textarea',\r\n            'after': '',\r\n            'class': 'ui-textarea',\r\n            'label': {'class': 'ui-label', 'text': 'Текст'}\r\n        }) }}\r\n\r\n        {{ form.input('price', {\r\n            'between': '',\r\n            'type': 'text',\r\n            'after': '',\r\n            'class': 'ui-input price-mask',\r\n            'required': true,\r\n            'label': {'class': 'ui-label', 'text': 'Стоимость *'}\r\n        }) }}\r\n    <\/div>\r\n    <div class=\"col col-12 col-lg-8 popup-public__col-gray offset-top-mod\">\r\n        <div class=\"row\">\r\n            <div class=\"col-12\" id=\"categoryParams\" data-ajax-load><\/div>\r\n        <\/div>\r\n        <div class=\"row\">\r\n            <div class=\"col col-12 col-lg-6\">\r\n                <div id=\"AdvertisementPicture_list\"><\/div>\r\n            <\/div>\r\n            <div class=\"col col-12 col-lg-6\">\r\n                <div class=\"popup-public__confirm\">\r\n                    <label class=\"ui-checkbox ui-checkbox--theme-white\">\r\n                        {{ form.checkbox('confirmation', {'checked': true,'hidden': true,'hiddenField': false,'value': 1}) }}\r\n                        <span class=\"ui-checkbox__icon\"><span class=\"icon-check_dark\"><\/span><\/span>\r\n                        <span class=\"ui-checkbox__text\">заполняя данную форму, <br>вы даете <a href=\"#popup-policy\" data-fancybox>согласие на обработку<br>ваших данных<\/a><\/span>\r\n                    <\/label>\r\n                    <div>\r\n                        {% if recaptcha.hasKey() %}\r\n                            {{ recaptcha.display_form({'id': 'realty_form', 'div': 'recaptcha-block'}) }}\r\n                        {% endif %}\r\n                    <\/div>\r\n                <\/div>\r\n                <div class=\"popup-public__buttons\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col col-12 col-xl-6\">\r\n                            {{ form.button('Опубликовать', {'type': 'submit', 'class': 'btn btn-default'}) }}\r\n                        <\/div>\r\n                        <div class=\"col col-12 col-xl-6\">\r\n                            {{ form.button('Добавить фото', {'type': 'button', 'class': 'btn btn-default JS-add-photo'}) }}\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n{{ form.end() }}\r\n{{ html.script('Agency.realty\/edit\/validation_rotate') }}\r\n<div class=\"upload-form\">\r\n    {{ uploadForm.load({\r\n        'url': '\/file_upload\/handler',\r\n        'modelName': 'Advertisement',\r\n        'pictureModelName': 'AdvertisementPicture',\r\n        'foreignKey': 'advertisement_id',\r\n        'container': '#AdvertisementPicture_list',\r\n        'addBtn': false\r\n    }) }}\r\n<\/div>\r\n",
                "status": true,
                "params": "disabledCkEditor=1\nloadComponent='[{\"name\" : \"Agency.Categories\", \"method\" : \"setCategoriesTree\", \"params\" : [\"controller\", false], \"allowPage\" : \"/agency/realty/add\"}]'",
                "show_title": false,
                "visibility_roles": "",
                "visibility_paths": ""
            }
        ]
    }
]
