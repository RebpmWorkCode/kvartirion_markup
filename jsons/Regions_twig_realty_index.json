[
    {
        "Region": {
            "title": "Twig | Список объектов",
            "alias": "twig_realty_index",
            "block_count": 1
        },
        "Block": [
            {
                "title": "Twig | Список объектов",
                "alias": "twig_realty_index",
                "body": "{{ _view.assign('title', adSeo.titleList()) }}\r\n{{ croogo_region alias = \"twig_search_block\" }}\r\n<div class=\"catalog\">\r\n    <div class=\"container\">\r\n        <div class=\"heading-base heading-base--medium text-center\">Каталог недвижимости<\/div>\r\n        <div class=\"catalog__sorting\">\r\n            <div class=\"sorting\">\r\n                {% set sortingValue = [_view.request.query('sort'), _view.request.query('direction')]|join('_') %}\r\n                {% set sortingValue = sortingValue != '_' ? sortingValue|replace({'Advertisement.': ''}) : '' %}\r\n                {% set sortingList = {\r\n                    '': 'По актуальности',\r\n                    'created_desc': 'Новые предложения',\r\n                    'price_asc': 'Цена по возрастанию',\r\n                    'price_desc': 'Цена по убыванию',\r\n                    'param_area_asc': 'Площадь по возрастанию',\r\n                    'param_area_desc': 'Площадь по убыванию'\r\n                } %}\r\n                <a class=\"sorting__main js-btn-window\" href=\"#modal-sorting\">\r\n                    <span class=\"sorting__main-text\">{{ sortingList[sortingValue] ?? 'По актуальности' }}<\/span>\r\n                    <span class=\"icon-sort\"><\/span>\r\n                <\/a>\r\n                {{ form.create('Advertisement', {\r\n                    'url': {'plugin':'agency','controller':'realty','action':'index'},\r\n                    'class':'sorting__modal js-window',\r\n                    'id': 'modal-sorting',\r\n                    'type': 'get'\r\n                }) }}\r\n                    <ul class=\"sorting__list\">\r\n                        {% for sortingKey, sortingItem in sortingList %}\r\n                            <li>\r\n                                <label class=\"btn-check\"><input type=\"radio\" class=\"sorting-list\" name=\"data[Advertisement][sorting]\" {% if sortingValue == sortingKey %} checked {% endif %} value=\"{{ sortingKey }}\" hidden>\r\n                                    <span class=\"btn-check__icon\"><span class=\"icon icon-check\"><\/span><\/span>\r\n                                    <span class=\"btn-check__text\">{{ sortingItem }}<\/span>\r\n                                <\/label>\r\n                            <\/li>\r\n                        {% endfor %}\r\n                    <\/ul>\r\n                {{ form.end() }}\r\n            <\/div>\r\n        <\/div>\r\n        <div class=\"section-title\">{{ paginator.params.current }} объектов<\/div>\r\n        <div>\r\n            {{ adView.setDefaults({default_picture: config.Site.no_photo_image}) }}\r\n            {% for item in list %}\r\n                {% set offerItem = adView.getInfo(item) %}\r\n                <div class=\"catalog__item\">\r\n                    <div class=\"catalog__item-gallery is-lg-visible\">\r\n                        <div>\r\n                            <div class=\"catalog__item-gallery-items\">\r\n                                {% set galleryList = adView.getGallery(item)['items'] %}\r\n                                {% set galleryList = imageResized.resizePicture(galleryList, {'width': '325', 'height': '275', 'mode': 'fit', 'paddings': false, 'folder': 'twig_fit_realty_list'}) %}\r\n                                {% for galleryItem in galleryList %}\r\n                                    <div><img src=\"{{ galleryItem.src }}\" alt=\"{{ galleryItem.description }}\"><\/div>\r\n                                {% endfor %}\r\n                            <\/div>\r\n                            <div class=\"catalog__item-buttons\">\r\n                                {% set favoriteActiveClass = '' %}\r\n                                {% set favoriteAction = 'add' %}\r\n                                {% if favorite.has('Advertisement', item.Advertisement.id) %}\r\n                                    {% set favoriteActiveClass = ' active' %}\r\n                                    {% set favoriteAction = 'remove' %}\r\n                                {% endif %}\r\n                                {{ html.link(html.tag('span', '', {'class': 'icon-heart_white'}), '#', {\r\n                                    'class': 'favorites-action btn btn-card btn-card--large' ~ favoriteActiveClass,\r\n                                    'escape': false,\r\n                                    'data-model': 'Advertisement',\r\n                                    'data-id': item.Advertisement.id,\r\n                                    'data-action': favoriteAction\r\n                                }) }}\r\n                            <\/div>\r\n                        <\/div>\r\n                    <\/div>\r\n                    <div class=\"catalog__item-section\">\r\n                        <div class=\"catalog__item-main\">\r\n                            <div class=\"catalog__item-main-section\">\r\n                                <div class=\"catalog__item-info-section\">\r\n                                    <div class=\"catalog__item-title\">{{ adSeo.pattern_title(item)|e }}<\/div>\r\n                                    <div class=\"catalog__item-adress\">{{ item.Advertisement.location_full|e }} <\/div>\r\n                                    <div class=\"card-informers\">\r\n                                        {% set paramsValues = item.CategoryParamValues ?? [] %}\r\n                                        {% set floor = complexCategory.getViewAliasesOptions('floor', paramsValues) %}\r\n                                        {% set floors = complexCategory.getViewAliasesOptions('floors', paramsValues) %}\r\n                                        {% set roomsNum = complexCategory.getViewAliasesOptions('rooms_num', paramsValues) %}\r\n                                        {% set area = complexCategory.getViewAliasesOptions('area', paramsValues) %}\r\n                                        {% if(floor and floors) %}\r\n                                            <div class=\"card-informers__item\">\r\n                                                <span class=\"icon-stages_gray card-informers__item-icon\"><\/span>\r\n                                                <span>Этаж<strong>{{ floor }}\/{{ floors }}<\/strong><\/span>\r\n                                            <\/div>\r\n                                        {% endif %}\r\n                                        {% if roomsNum %}\r\n                                            <div class=\"card-informers__item\">\r\n                                                <span class=\"icon-bed_gray card-informers__item-icon\"><\/span>\r\n                                                <span><strong>{{ roomsNum }}<\/strong> комнаты<\/span>\r\n                                            <\/div>\r\n                                        {% endif %}\r\n                                        {% if area %}\r\n                                            <div class=\"card-informers__item\">\r\n                                                <span class=\"icon-house_gray card-informers__item-icon\"><\/span>\r\n                                                <span><strong>{{ area }}<\/strong>м²<\/span>\r\n                                            <\/div>\r\n                                        {% endif %}\r\n                                    <\/div>\r\n                                <\/div>\r\n                                <div class=\"catalog__item-prices\">\r\n                                    <div class=\"price price--size-large\">\r\n                                        <span class=\"price__main\">{{ price.format(item.Advertisement.price) }}<\/span>\r\n                                        <span class=\"price__currency\">₽<\/span>\r\n                                    <\/div>\r\n                                    <div class=\"price price--size-large\">\r\n                                        <span class=\"price__main\">{{ price.format(item.Advertisement.price_area) }}<\/span>\r\n                                        <span class=\"price__currency\">₽<\/span>\r\n                                        <span class=\"price__footage\">м²<\/span>\r\n                                    <\/div>\r\n                                    <div class=\"catalog__item-gallery is-lg-hidden\">\r\n                                        <div>\r\n                                            <div class=\"catalog__item-gallery-items\">\r\n                                                {% set galleryList = adView.getGallery(item)['items'] %}\r\n                                                {% set galleryList = imageResized.resizePicture(galleryList, {'width': '325', 'height': '275', 'mode': 'fit', 'paddings': false, 'folder': 'twig_fit_realty_list'}) %}\r\n                                                {% for galleryItem in galleryList %}\r\n                                                    <div><img src=\"{{ galleryItem.src }}\" alt=\"{{ galleryItem.description }}\"><\/div>\r\n                                                {% endfor %}\r\n                                            <\/div>\r\n                                            <div class=\"catalog__item-buttons\">\r\n                                                {{ html.link(html.tag('span', '', {'class': 'icon-heart_white'}), '#', {\r\n                                                    'class': 'favorites-action btn btn-card btn-card--large' ~ favoriteActiveClass,\r\n                                                    'escape': false,\r\n                                                    'data-model': 'Advertisement',\r\n                                                    'data-id': item.Advertisement.id,\r\n                                                    'data-action': favoriteAction\r\n                                                }) }}\r\n                                            <\/div>\r\n                                        <\/div>\r\n                                    <\/div>\r\n                                <\/div>\r\n                            <\/div>\r\n                            {% if item.Rieltor.id %}\r\n                                <div class=\"catalog__item-agent\">\r\n                                    <div class=\"catalog__item-agent-photo\">\r\n                                        <img src=\"\/{{ item.Rieltor.image }}\" alt=\"{{ item.Rieltor.name }}\">\r\n                                    <\/div>\r\n                                    <div class=\"catalog__item-agent-main\">\r\n                                        <div>ваш агент<\/div>\r\n                                        <div class=\"catalog__item-agent-name\">\r\n                                            <strong>{{ item.Rieltor.name }}<\/strong>\r\n                                        <\/div>\r\n                                        {% if item.Rieltor.phone %}\r\n                                            <div class=\"contact-item contact-item--size-mini\">\r\n                                                <a class=\"contact-item__link\" href=\"tel:{{ item.Rieltor.phone }}\">\r\n                                                    <span class=\"contact-item__icon\"><span class=\"icon-tel_blue\"><\/span><\/span>\r\n                                                    <span>{{ item.Rieltor.phone }}<\/span>\r\n                                                <\/a>\r\n                                            <\/div>\r\n                                        {% endif %}\r\n                                        {% if item.Rieltor.email %}\r\n                                            <div class=\"contact-item contact-item--size-mini\">\r\n                                                <a class=\"contact-item__link\" href=\"mailto:{{ item.Rieltor.email }}\">\r\n                                                    <span class=\"contact-item__icon\"><span class=\"icon-mail_blue\"><\/span><\/span>\r\n                                                    <span>{{ item.Rieltor.email }}<\/span>\r\n                                                <\/a>\r\n                                            <\/div>\r\n                                        {% endif %}\r\n                                        <div class=\"catalog__item-agent-btn\">\r\n                                            <a class=\"btn btn-default btn-default--medium\" href=\"#contact_with_agent\" data-fancybox data-id=\"{{ item.Advertisement.id }}\">\r\n                                                Связаться с агентом\r\n                                            <\/a>\r\n                                        <\/div>\r\n                                    <\/div>\r\n                                <\/div>\r\n                            {% endif %}\r\n                        <\/div>\r\n                        <div class=\"catalog__item-bottom\">\r\n                            <div class=\"catalog__item-desc\">{{ adView.getSiteText(item)|e }}<\/div>\r\n                            <div class=\"catalog__item-date\">{{ rusTime.formatDate(item.Advertisement.created)|e }}<\/div>\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            {% endfor %}\r\n        <\/div>\r\n    <\/div>\r\n    <div class=\"pagination\">\r\n        {{ paginator.first('<<') }}\r\n        {{ paginator.prev('<') }}\r\n        {{ paginator.numbers({'separator': '', 'modulus': 7}) }}\r\n        {{ paginator.next('>') }}\r\n        {{ paginator.last('>>') }}\r\n    <\/div>\r\n<\/div>\r\n",
                "status": true,
                "params": "disabledCkEditor=1"
            }
        ]
    }
]